cmake_minimum_required(VERSION 3.10)

project(ImGuiStaticLib VERSION 1.0.0)

# Add all ImGui source files
set(IMGUI_SRC
    imgui.cpp
    imgui_draw.cpp
    imgui_tables.cpp
    imgui_widgets.cpp
    imgui_demo.cpp  # Include this if you want the demo, remove if not needed
)

# Add all ImGui headers
set(IMGUI_HDR
    imgui.h
    imgui_internal.h
    imconfig.h
    imstb_rectpack.h
    imstb_textedit.h
    imstb_truetype.h
)

# Add ImGui source group
source_group(TREE ${CMAKE_CURRENT_SOURCE_DIR} FILES ${IMGUI_SRC} ${IMGUI_HDR})

# Create a static library target
add_library(imgui STATIC ${IMGUI_SRC} ${IMGUI_HDR})

# Include directories for ImGui
target_include_directories(imgui PUBLIC ${CMAKE_CURRENT_SOURCE_DIR})

# Set target properties
set_target_properties(imgui PROPERTIES
    VERSION ${PROJECT_VERSION}
    CXX_STANDARD 11
    CXX_STANDARD_REQUIRED YES
    CXX_EXTENSIONS NO
)

# Optionally, if you are using any backend renderer (OpenGL, Vulkan, etc.), 
# you can include their source files here
# For example, to add the OpenGL3 backend:
#set(IMGUI_BACKEND_SRC
#    backends/imgui_impl_opengl3.cpp
#    backends/imgui_impl_glfw.cpp  # If using GLFW for window management
#)
#add_library(imgui_backend STATIC ${IMGUI_BACKEND_SRC})
#target_include_directories(imgui_backend PUBLIC ${CMAKE_CURRENT_SOURCE_DIR} ${CMAKE_CURRENT_SOURCE_DIR}/backends)
#target_link_libraries(imgui_backend PUBLIC imgui)

# To install the library and headers (optional)
install(TARGETS imgui
    ARCHIVE DESTINATION lib
    LIBRARY DESTINATION lib
    RUNTIME DESTINATION bin
)

install(FILES ${IMGUI_HDR} DESTINATION include)